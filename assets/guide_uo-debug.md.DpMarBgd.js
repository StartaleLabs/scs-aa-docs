import{_ as i,c as a,o as e,ae as t}from"./chunks/framework.Dh1jimFm.js";const u=JSON.parse('{"title":"üõ†Ô∏è Debugging Guide for UserOperations in Account Abstraction","description":"","frontmatter":{},"headers":[],"relativePath":"guide/uo-debug.md","filePath":"guide/uo-debug.md"}'),n={name:"guide/uo-debug.md"};function l(o,s,h,r,p,k){return e(),a("div",null,s[0]||(s[0]=[t(`<h1 id="üõ†Ô∏è-debugging-guide-for-useroperations-in-account-abstraction" tabindex="-1">üõ†Ô∏è <strong>Debugging Guide for UserOperations in Account Abstraction</strong> <a class="header-anchor" href="#üõ†Ô∏è-debugging-guide-for-useroperations-in-account-abstraction" aria-label="Permalink to &quot;üõ†Ô∏è **Debugging Guide for UserOperations in Account Abstraction**&quot;">‚Äã</a></h1><p>When sending a <code>UserOperation</code> to the bundler, it can sometimes be unclear if it was included in a block or reverted. Here&#39;s how you can debug step-by-step.</p><hr><h2 id="_1Ô∏è‚É£-understanding-bundler-s-receipt-via-eth-getuseroperationbyhash" tabindex="-1">1Ô∏è‚É£ Understanding Bundler&#39;s Receipt via <code>eth_getUserOperationByHash</code> <a class="header-anchor" href="#_1Ô∏è‚É£-understanding-bundler-s-receipt-via-eth-getuseroperationbyhash" aria-label="Permalink to &quot;1Ô∏è‚É£ Understanding Bundler&#39;s Receipt via \`eth_getUserOperationByHash\`&quot;">‚Äã</a></h2><p>The first step is to poll the bundler to check if the <code>UserOperation</code> has been included using:</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">BUNDLER_URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  headers: { </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Content-Type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;application/json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  body: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    jsonrpc: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;eth_getUserOperationByHash&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    params: [userOpHash],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>The response structure looks like this if the <code>UserOperation</code> has been included:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;jsonrpc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;result&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;userOperationHash&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0x...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;sender&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0x...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;nonce&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0x0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;paymaster&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0x...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;transactionHash&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0x...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;reason&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;gasUsed&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0x...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;actualGasCost&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0x...&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><blockquote><p>‚úÖ transactionHash present ‚Üí Operation was included<br> ‚ùå <strong>transactionHash null</strong> ‚Üí Still pending or dropped</p></blockquote><p>If <code>success</code> is <code>false</code>, you may also see a <code>reason</code> field with the revert reason (if the bundler captured it).</p><hr><h2 id="_2Ô∏è‚É£-checking-block-explorer-blockscout" tabindex="-1">2Ô∏è‚É£ Checking Block Explorer (Blockscout) <a class="header-anchor" href="#_2Ô∏è‚É£-checking-block-explorer-blockscout" aria-label="Permalink to &quot;2Ô∏è‚É£ Checking Block Explorer (Blockscout)&quot;">‚Äã</a></h2><p>If the <code>transactionHash</code> is present, go to the testnet block explorer like:</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> https</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//explorer-testnet.soneium.org/tx/&lt;transactionHash&gt; </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> https</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//soneium-minato.blockscout.com/tx/&lt;transactionHash&gt;</span></span></code></pre></div><p>You&#39;ll see the following:</p><ul><li><strong>Status:</strong> Success or Failed</li><li><strong>Gas used / Actual cost</strong></li><li><strong>Logs &amp; Events</strong> (Useful for checking emitted logs or debugging)</li><li><strong>Function call data</strong> (decoded input data)</li></ul><p><strong>Blockscout</strong> also now supports ERC-4337-specific views for <code>UserOperations</code>. Look for:</p><ul><li>UserOp Hash</li><li>Sender (smart account)</li><li>Paymaster used</li><li>EntryPoint contract</li><li>Bundler address</li></ul><blockquote><p>If status is failed, check:</p><ul><li>Whether the smart account was deployed</li><li><code>initCode</code> was correct</li><li>Paymaster had enough balance or permission</li><li><code>revertReason</code> from bundler response (if any)</li></ul></blockquote><hr><h2 id="_3Ô∏è‚É£-using-tenderly-for-deep-debugging" tabindex="-1">3Ô∏è‚É£ Using Tenderly for Deep Debugging <a class="header-anchor" href="#_3Ô∏è‚É£-using-tenderly-for-deep-debugging" aria-label="Permalink to &quot;3Ô∏è‚É£ Using Tenderly for Deep Debugging&quot;">‚Äã</a></h2><p>To debug deeper (like step-by-step trace of contract calls), you can use Tenderly:</p><h3 id="‚úÖ-how-to-use-tenderly" tabindex="-1">‚úÖ How to Use Tenderly: <a class="header-anchor" href="#‚úÖ-how-to-use-tenderly" aria-label="Permalink to &quot;‚úÖ How to Use Tenderly:&quot;">‚Äã</a></h3><ol><li><strong>Find your transaction hash</strong> via the bundler receipt or blockscout.</li><li>Open:</li></ol><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">https</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//dashboard.tenderly.co/public/&lt;your-project&gt;/tx/&lt;transactionHash&gt;</span></span></code></pre></div><p>Replace <code>&lt;your-project&gt;</code> with your public project name if you have one. If you&#39;re using a private workspace, login to Tenderly and go to the transaction dashboard.</p><ol start="3"><li><strong>View Execution Trace:</strong><ul><li>See all internal contract calls</li><li>Hover over steps to view decoded inputs and return values</li><li>Identify the exact contract and function where failure occurred</li></ul></li><li><strong>Check Gas Report &amp; State Changes:</strong><ul><li>Analyze which call consumed how much gas</li><li>Inspect changes to smart contract storage</li></ul></li></ol><blockquote><p>üîç You can even fork the transaction and simulate fixes directly in Tenderly.</p></blockquote><hr><h3 id="‚öôÔ∏è-simulating-useroperations-in-tenderly" tabindex="-1">‚öôÔ∏è Simulating <code>UserOperation</code>s in Tenderly <a class="header-anchor" href="#‚öôÔ∏è-simulating-useroperations-in-tenderly" aria-label="Permalink to &quot;‚öôÔ∏è Simulating \`UserOperation\`s in Tenderly&quot;">‚Äã</a></h3><p>Simulating a <code>UserOperation</code> in Tenderly can help catch failures <strong>before</strong> sending it to the bundler. It provides detailed traces, reverts, and state diffs which make debugging super intuitive.</p><hr><h3 id="üß™-why-use-simulation" tabindex="-1">üß™ Why Use Simulation? <a class="header-anchor" href="#üß™-why-use-simulation" aria-label="Permalink to &quot;üß™ Why Use Simulation?&quot;">‚Äã</a></h3><p>Before sending a <code>UserOperation</code>, it&#39;s good practice to simulate it using either:</p><ul><li><code>EntryPoint.simulateValidation()</code> ‚Äì to check if the bundler would accept it.</li><li><code>EntryPoint.simulateHandleOp()</code> ‚Äì to simulate full execution including <code>execute()</code> call.</li><li>Or simulate the full <code>eth_sendUserOperation</code> payload directly in Tenderly!</li></ul><hr><h3 id="üöÄ-steps-to-simulate-a-useroperation-in-tenderly" tabindex="-1">üöÄ Steps to Simulate a UserOperation in Tenderly <a class="header-anchor" href="#üöÄ-steps-to-simulate-a-useroperation-in-tenderly" aria-label="Permalink to &quot;üöÄ Steps to Simulate a UserOperation in Tenderly&quot;">‚Äã</a></h3><h3 id="_1Ô∏è‚É£-create-a-fork-or-project-in-tenderly" tabindex="-1">1Ô∏è‚É£ Create a Fork or Project in Tenderly <a class="header-anchor" href="#_1Ô∏è‚É£-create-a-fork-or-project-in-tenderly" aria-label="Permalink to &quot;1Ô∏è‚É£ Create a Fork or Project in Tenderly&quot;">‚Äã</a></h3><ul><li>Go to Tenderly Dashboard</li><li>Create a <strong>new project</strong> or use an existing one.</li><li>Create a <strong>fork</strong> of your target network (e.g., Base Sepolia, Soneium Testnet)</li></ul><hr><h3 id="_2Ô∏è‚É£-prepare-your-payload" tabindex="-1">2Ô∏è‚É£ Prepare Your Payload <a class="header-anchor" href="#_2Ô∏è‚É£-prepare-your-payload" aria-label="Permalink to &quot;2Ô∏è‚É£ Prepare Your Payload&quot;">‚Äã</a></h3><p>Prepare the full <code>UserOperation</code> as JSON that you&#39;d send to the bundler:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;sender&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0xYourSmartAccount&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;nonce&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0x0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;initCode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0x...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;callData&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0x...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;callGasLimit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0x...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;verificationGasLimit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0x...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;preVerificationGas&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0x...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;maxFeePerGas&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0x...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;maxPriorityFeePerGas&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0x...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;paymaster&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0xYourPaymaster&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;paymasterData&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0x...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;signature&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0x...&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="_3Ô∏è‚É£-open-tenderly-simulator" tabindex="-1">3Ô∏è‚É£ Open Tenderly Simulator <a class="header-anchor" href="#_3Ô∏è‚É£-open-tenderly-simulator" aria-label="Permalink to &quot;3Ô∏è‚É£ Open Tenderly Simulator&quot;">‚Äã</a></h3><ul><li>Go to your <strong>Fork</strong> in Tenderly</li><li>Click <strong>&quot;Simulate Transaction&quot;</strong> ‚Üí then choose <strong>Custom Call</strong></li></ul><p>Set the parameters:</p><ul><li><strong>From:</strong> <code>EntryPoint</code> contract address</li><li><strong>To:</strong> <code>EntryPoint</code> contract address</li><li><strong>Input:</strong> ABI-encoded call to <code>handleOps([userOp], beneficiary)</code></li></ul><blockquote><p>You can encode this using ethers.js:</p></blockquote><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">entryPointInterface.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">encodeFunctionData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;handleOps&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [[userOp], beneficiary])</span></span></code></pre></div><p>Set:</p><ul><li><strong>Gas limit</strong>: sufficiently high (e.g., <code>10,000,000</code>)</li><li><strong>Value</strong>: 0</li><li><strong>State override</strong>: You can override the <code>sender</code> smart account storage if it‚Äôs not deployed yet</li></ul><hr><h3 id="_4Ô∏è‚É£-run-the-simulation" tabindex="-1">4Ô∏è‚É£ Run the Simulation <a class="header-anchor" href="#_4Ô∏è‚É£-run-the-simulation" aria-label="Permalink to &quot;4Ô∏è‚É£ Run the Simulation&quot;">‚Äã</a></h3><p>Click <strong>Simulate</strong>. You‚Äôll see:</p><ul><li>üìç Every internal call</li><li>üî• Revert reasons</li><li>üìä Gas breakdown</li><li>üß† State diffs</li><li>üßµ Stack traces with contract-level debug</li></ul><hr><h3 id="üßô‚Äç‚ôÄÔ∏è-pro-tips" tabindex="-1">üßô‚Äç‚ôÄÔ∏è Pro Tips <a class="header-anchor" href="#üßô‚Äç‚ôÄÔ∏è-pro-tips" aria-label="Permalink to &quot;üßô‚Äç‚ôÄÔ∏è Pro Tips&quot;">‚Äã</a></h3><ul><li>If your smart account isn&#39;t deployed yet, simulate with <code>initCode</code> and override its nonce or code hash in the state override tab.</li><li>For Paymaster failures, ensure you override the paymaster&#39;s storage/balance if needed.</li><li>Use the Tenderly CLI to script simulations in CI pipelines (e.g., before sending real UserOps).</li></ul><hr><h3 id="‚úÖ-example-debug-flow-with-tenderly" tabindex="-1">‚úÖ Example Debug Flow with Tenderly <a class="header-anchor" href="#‚úÖ-example-debug-flow-with-tenderly" aria-label="Permalink to &quot;‚úÖ Example Debug Flow with Tenderly&quot;">‚Äã</a></h3><ol><li>Generate the UserOp off-chain using your SDK</li><li>Encode the <code>handleOps([userOp], beneficiary)</code> call</li><li>Simulate in Tenderly using your fork</li><li>If simulation fails: <ul><li>Check <code>signature</code></li><li>Check <code>initCode</code> is correct</li><li>Confirm Paymaster is funded/whitelisted</li><li>Inspect revert reason inside your smart account logic</li></ul></li></ol><hr><h3 id="‚úÖ-final-tips" tabindex="-1">‚úÖ Final Tips <a class="header-anchor" href="#‚úÖ-final-tips" aria-label="Permalink to &quot;‚úÖ Final Tips&quot;">‚Äã</a></h3><ul><li><p>If the transaction is not included after retries, check if:</p><ul><li>Your bundler is alive and reachable.</li><li>Your <code>UserOperation</code> passed all simulation checks (e.g., <code>simulateValidation</code>).</li><li>Gas limits are correctly estimated and funded.</li></ul></li><li><p>Use console logs in your scripts to track:</p></li></ul><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UserOpHash:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, userOpHash);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TransactionHash:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, result.result?.transactionHash);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Revert reason:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, result.result?.reason);</span></span></code></pre></div><ul><li>Reach out to us on one of the support channels if you are still not able to pass a successful transaction.</li></ul>`,67)]))}const c=i(n,[["render",l]]);export{u as __pageData,c as default};
